{
  "pluginAlias": "HomebridgeMoonraker",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Each 3d printer configured is a separate accessory. Prefer using hostname.local when configuring your printer URL(s) as IPs can change unless reserved.\n\nThere is no camera accessory for each 3D Printer, the current recommendation is to use the [homebridge-camera-ui](https://github.com/seydx/homebridge-camera-ui) to achieve viewing your 3D Printer camera alongside this plugin. You can also leverage features from that plugin with this plugin to record snapshots on specific events (such as cancelation). For more info, please view the detailed [documentation](https://github.com/rajivsarvepalli/homebridge-moonraker?tab=readme-ov-file#-documentation) of this plugin.",
  "schema": {
    "type": "object",
    "properties": {
      "features": {
        "title": "Enabled Features",
        "type": "array",
        "uniqueItems": true,
        "items": {
          "title": "Features",
          "type": "string",
          "enum": [
            "Bed Thermostat",
            "Extruder Thermostat",
            "Print Progress",
            "Temperature Sensor(s)",
            "Print Controls",
            "Notifications"
          ]
        }
      },
      "printers": {
        "title": "Printer Configuration(s)",
        "type": "array",
        "required": true,
        "uniqueItems": true,
        "minItems": 1,
        "maxItems": 10,
        "items": {
          "type": "object",
          "properties": {
            "manufacturer": {
              "name": "Manufacturer",
              "type": "string",
              "placeholder": "Moonraker",
              "description": "Set the manufacturer name for display in the Home app.",
              "minLength": 1,
              "maxLength": 255
            },
            "model": {
              "name": "Model",
              "type": "string",
              "placeholder": "3d Printer",
              "description": "Set the model for display in the Home app.",
              "minLength": 1,
              "maxLength": 255
            },
            "serialNumber": {
              "name": "Serial Number",
              "type": "string",
              "placeholder": "SerialNumber",
              "description": "Set the serial number for display in the Home app.",
              "minLength": 1,
              "maxLength": 255
            },
            "moonrakerUrl": {
              "required": true,
              "type": "string",
              "title": "Moonraker URL",
              "description": "The moonraker url(s) in http format for your 3d printer.",
              "minLength": 1,
              "maxLength": 1000
            },
            "name": {
              "required": true,
              "type": "string",
              "title": "Printer Name",
              "description": "The unique name for this printer. Note the name must be unique across all printers configured for this plugin.",
              "minLength": 1,
              "maxLength": 255
            },
            "maxBedHeaterTemp": {
              "required": true,
              "type": "number",
              "default": 120,
              "condition": {
                "functionBody": "return model.features && model.features.includes('Bed Thermostat');"
              },
              "title": "Max Bed Heater Temp (C)",
              "minimum": 1,
              "maximum": 500
            },
            "maxExtruderHeaterTemp": {
              "required": true,
              "condition": {
                "functionBody": "return model.features && model.features.includes('Extruder Thermostat');"
              },
              "type": "number",
              "default": 300,
              "title": "Max Extruder Heater Temp (C)",
              "minimum": 1,
              "maximum": 1000
            },
            "notifyCameraToRecordUrl": {
              "title": "Camera Cancel Recording URL",
              "condition": {
                "functionBody": "return model.features && model.features.includes('Notifications');"
              },
              "type": "string",
              "description": "The camera recording url to trigger when a print is canceled (e.g. for homebridge-camera-ui this would typically look like http://localhost:8123/motion?My+Camera+Name)",
              "minLength": 1,
              "maxLength": 1000
            },
            "temperatureSensors": {
              "title": "Temperature Sensor(s)",
              "condition": {
                "functionBody": "return model.features && model.features.includes('Temperature Sensor(s)');"
              },
              "type": "array",
              "uniqueItems": true,
              "maxItems": 10,
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "required": true,
                    "title": "Temperature Sensor Name",
                    "default": "Chamber",
                    "description": "The temperature sensor(s) to monitor (usually just chamber).",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "moonrakerName": {
                    "type": "string",
                    "required": true,
                    "title": "Moonraker Name",
                    "default": "chamber",
                    "description": "The name for the sensor for Moonraker API calls (usually the sensor name inside the klipper printer.cfg file).",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "minTemp": {
                    "type": "number",
                    "required": true,
                    "default": 0,
                    "title": "Min Temperature (C)",
                    "description": "The min temperature in celsius to be measured by the sensor.",
                    "minimum": -1000,
                    "maximum": 1000
                  },
                  "maxTemp": {
                    "type": "number",
                    "required": true,
                    "default": 100,
                    "title": "Max Temperature (C)",
                    "description": "The max temperature in celsius to be measured by the sensor.",
                    "minimum": -1000,
                    "maximum": 1000
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}